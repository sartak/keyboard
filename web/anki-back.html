{{FrontSide}}

<hr id="answer" />

<div class="input-field">{{Input}}</div>

<style>
  :root {
    --desired-width: min(95vw, calc(90vh / var(--keymap-ratio)));
  }

  {{keymap.css}}
  {{monkeytype-sonokai.css}}
</style>

{{keymap.html}}

<script>
    const layout = {{layout}};

    const input = document.querySelector('.input-field').innerText.split(' ');

    let layer = 'Alpha';
    let shift = false;
    let ctrl = false;
    let alt = false;
    let gui = false;
    let isChord = false;
    let hold = false;

    const downKeys = [];
    const holdKeys = [];
    input.forEach((key) => {
      switch (key) {
        case 'Shift':
          shift = true;
          holdKeys.push(layout.modKeys.Shft);
          break;
        case 'Ctrl':
          ctrl = true;
          holdKeys.push(layout.modKeys.Ctrl);
          break;
        case 'Alt':
          alt = true;
          holdKeys.push(layout.modKeys.Alt);
          break;
        case 'Gui':
          gui = true;
          holdKeys.push(layout.modKeys.Gui);
          break;
        case 'Hold':
          hold = true;
          break;
        default:
          downKeys.push(key);
      }
    });

    {{keymap.js}}

  drawKeymap({ layer, shift, ctrl, alt, gui });

    downKeys.forEach((key) => {
      highlightKey(key, isChord ? 'chord-tap' : 'down');
    });

    holdKeys.forEach((key) => {
      highlightKey(key, isChord ? 'chord-hold' : 'hold');
    });
</script>
